# 講義「システム情報学概論」サンプルコード

ファイル名：a_ball_bounce_on_parabola_multi.pde

使用言語：[Processing](https://processing.org)

  
  * シミュレーションモデル  
    - 1つの質点が重力を受けて落下する。
    - 下方には下の放物線がある。
      ```
         y = x^2 / 2
      ```      
    - 質点は放物線に衝突すると反射する。
  
  * 変数の定義
    - 質点の位置を (x,y) とし、速度を(vx,vy) とする。
    - 一般化座標(x,y,vx,vy)をGeneralCoordsクラスにまとめた。

  * シミュレーション手法
    - ラグランジュの運動方程式を`equation_of_motion()`関数で解く。
    - 数値積分には古典的な4次ルンゲ・クッタ法を使う。
    - 座標や物理量は`float`（単精度）浮動小数点数として計算している。
    - 精度確認のため全エネルギーを計算・表示する。
  
  * 可視化
    - Processingの線分と円の表示機能を使用。
    - Processingではy軸（`+y`）の向きが画面の下方向なのでmap関数で反転し、
      y軸`+y`が画面の上方向になるようにしている。
    - Processingのウィンドウ画面を3つの領域に分割して使う。
    - 細かく言えばこの3つの領域の周囲にヘッダとフッタ領域も確保している。
``` 
        +------------+------------+------------+
        |            |            |            |
        |     x-y    |    x1-x2   |   x1-v1    |
        |     plot   |     plot   |  Poincare  |
        |(real space)|(Every time |    map     |
        |            |      steps)| (For v2=0) |
        |            |            |            |
        +------------+------------+------------+
```
       
  * 使用法
    - 初期条件の設定は setup()関数の以下の部分で変更する。
        `ball = new GeneralCoords( 質点のx座標, 速度のx成分 vx,
                                  質点のy座標, 速度のy成分 vy )`
    - キーボードの`u`キーで計算（表示）の加速。
    - キーボードの`d`キーで計算（表示）の減速。
    - キーボードの`s`キーで計算（表示）の一時停止(stop)と再スタート(start)。
    - マウスクリックもstart/stopのトグル。 
    
  * 開発履歴
    - Akira Kageyama (kage@port.kobe-u.ac.jp)
    - July 05, 2023
